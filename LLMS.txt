# Umara

> Beautiful Python UI framework for building web applications without HTML, CSS, or JavaScript.

## Installation

```bash
pip install umara
```

## Quick Start

```python
import umara as um

um.set_theme('ocean')
um.header('My App')

# IMPORTANT: Use forms for input + button patterns
with um.form('greeting_form'):
    name = um.input('Your name')
    if um.form_submit_button('Greet'):
        um.success(f'Hello, {name}!')
```

Run: `umara run app.py`
Open: http://localhost:8501

---

## CRITICAL PATTERNS

### Pattern 1: Input + Button (USE FORMS!)

**WRONG** - Button may fire before input value is synced (50ms debounce):
```python
# DON'T DO THIS - race condition possible
name = um.input('Name', key='name')
if um.button('Submit'):
    um.success(f'Hello {name}')  # name might be stale!
```

**CORRECT** - Form batches values and submits together:
```python
# DO THIS - values guaranteed to be current
with um.form('my_form'):
    name = um.input('Name')
    email = um.input('Email')
    if um.form_submit_button('Submit'):
        um.success(f'Submitted: {name}, {email}')
```

### Pattern 2: Real-time Updates (Standalone + Key)

Use standalone inputs with `key` only for real-time filtering/search:
```python
# Good for search - updates on every keystroke
search = um.input('Search', key='search_query')
filtered = [item for item in items if search.lower() in item.lower()]
for item in filtered:
    um.text(item)
```

### Pattern 3: Toggle/Checkbox Immediate Effect

```python
dark_mode = um.toggle('Dark mode', key='dark_mode')
if dark_mode:
    um.set_theme('dark')
else:
    um.set_theme('light')
```

### When to Use What

| Scenario | Solution |
|----------|----------|
| Input + submit button | `um.form()` + `um.form_submit_button()` |
| Multi-field data entry | `um.form()` |
| Real-time search/filter | Standalone input with `key` |
| Toggle/checkbox immediate effect | Standalone with `key` |

---

## API Reference

### Typography
```python
um.header('Section Header', level=1)  # level 1-6
um.subheader('Subsection')
um.text('Regular text')
um.text('Colored text', color='#6366f1')
um.markdown('**bold** and *italic*')
um.code('print("hello")', language='python')
```

### Input Components

All inputs return their current value. Use `key` parameter for persistence outside forms.

```python
# Text input
text = um.input(
    label='',
    key=None,           # State key for persistence
    value='',           # Default value
    placeholder='',
    type='text',        # 'text', 'password', 'email', 'number'
    disabled=False
)

# Multi-line text
text = um.text_area(label='', key=None, value='', placeholder='', rows=4)

# Slider
num = um.slider(label='', min_value=0, max_value=100, value=None, key=None, step=1)

# Select dropdown
choice = um.select(
    label='',
    options=['A', 'B', 'C'],  # List of strings
    key=None,
    default=None,
    placeholder='Select an option...'
)

# Multi-select
choices = um.multiselect(label='', options=[], key=None, default=[])

# Radio buttons
option = um.radio(label='', options=['S', 'M', 'L'], key=None, default=None, horizontal=False)

# Checkbox (returns bool)
checked = um.checkbox(label='', key=None, value=False)

# Toggle switch (returns bool)
enabled = um.toggle(label='', key=None, value=False)
```

### Buttons
```python
# Click button (returns True when clicked)
if um.button(
    label='Click me',
    key=None,
    variant='primary',  # 'primary', 'secondary', 'outline', 'ghost', 'danger'
    disabled=False,
    full_width=False
):
    um.success('Clicked!')
```

### Forms
```python
with um.form(
    key='my_form',
    clear_on_submit=False,  # Clear values after submit
    border=True             # Show border around form
):
    name = um.input('Name')
    email = um.input('Email')

    if um.form_submit_button(label='Submit', variant='primary'):
        # All values guaranteed to be current here
        um.success(f'Got: {name}, {email}')
```

### Layouts
```python
# Columns
with um.columns(3):  # Number of columns
    with um.column():
        um.text('Column 1')
    with um.column():
        um.text('Column 2')
    with um.column():
        um.text('Column 3')

# Grid
with um.grid(columns=4, gap='16px'):
    for i in range(8):
        um.text(f'Item {i}')

# Card
with um.card(title='Card Title', subtitle='Optional subtitle'):
    um.text('Card content')

# Tabs
with um.tabs(['Tab 1', 'Tab 2']) as t:
    with t.tab(0):
        um.text('Content for tab 1')
    with t.tab(1):
        um.text('Content for tab 2')

# Sidebar
with um.sidebar():
    um.header('Navigation')
    um.text('Sidebar content')

# Expander (collapsible)
with um.expander('Click to expand', expanded=False):
    um.text('Hidden content')
```

### Data Display
```python
um.metric(label='Users', value='12,543', delta=12.5)  # With trend indicator
um.progress(value=75, label='Completion')
um.dataframe(data, sortable=True)  # Works with pandas DataFrames or list of dicts
um.divider()
um.spacer(height='24px')
```

### Feedback
```python
um.success('Done!')
um.error('Failed')
um.warning('Caution')
um.info('Note')
```

### State Management
```python
# Persist data across reruns
um.session_state.setdefault('counter', 0)
um.session_state.counter += 1

# Both notations work:
um.session_state.counter = 5
um.session_state['counter'] = 5
```

### Themes
```python
# 12 built-in themes
um.set_theme('light')     # default
um.set_theme('dark')      # dark mode
um.set_theme('ocean')     # blues
um.set_theme('forest')    # greens
# Also: slate, nord, midnight, rose, copper, lavender, sunset, mint
```

---

## Common Examples

### Contact Form
```python
import umara as um

um.header('Contact Us')

with um.card():
    with um.form('contact'):
        name = um.input('Name')
        email = um.input('Email', type='email')
        message = um.text_area('Message', rows=5)

        if um.form_submit_button('Send Message'):
            if not all([name, email, message]):
                um.error('Please fill all fields')
            else:
                um.success('Message sent!')
```

### Dashboard with Metrics
```python
import umara as um

um.set_theme('dark')
um.header('Dashboard')

with um.columns(4):
    with um.column():
        um.metric('Users', '12,543', delta=12.5)
    with um.column():
        um.metric('Revenue', '$48.2K', delta=8.2)
    with um.column():
        um.metric('Sessions', '1,892', delta=-2.4)
    with um.column():
        um.metric('Conversion', '3.24%', delta=0.5)

# Data table
sample_data = [
    {'Name': 'Alice', 'Age': 28, 'City': 'New York'},
    {'Name': 'Bob', 'Age': 34, 'City': 'San Francisco'},
]
um.dataframe(sample_data, sortable=True)
```

### Search with Live Filtering
```python
import umara as um

items = ['Apple', 'Banana', 'Cherry', 'Date', 'Elderberry']

# Real-time search - use key, no form needed
search = um.input('Search fruits', key='search')

filtered = [item for item in items if search.lower() in item.lower()]

for item in filtered:
    um.text(f'- {item}')
```

### Settings with Sidebar
```python
import umara as um

with um.sidebar():
    um.header('Settings')
    dark = um.toggle('Dark mode', key='dark_mode')
    show_details = um.checkbox('Show details', key='show_details')

if dark:
    um.set_theme('dark')
else:
    um.set_theme('light')

um.header('Content')
um.text('Main content here')

if show_details:
    with um.expander('Details', expanded=True):
        um.text('Extra information...')
```

### Counter with State
```python
import umara as um

um.header('Counter Example')

um.session_state.setdefault('counter', 0)

um.text(f'Count: {um.session_state.counter}')

with um.columns(2):
    with um.column():
        if um.button('Increment', key='inc'):
            um.session_state.counter += 1
    with um.column():
        if um.button('Reset', variant='outline', key='reset'):
            um.session_state.counter = 0
```

---

## CLI Commands

```bash
umara run app.py              # Run app
umara run app.py --port 8080  # Custom port
umara init my_project         # Create new project
umara themes                  # List themes
```

## Documentation

Full API: docs/UMARA_COMPLETE_REFERENCE.md
GitHub: https://github.com/lhassa8/umara
PyPI: https://pypi.org/project/umara/
